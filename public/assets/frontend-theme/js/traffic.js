(()=>{function L(L,V,i,E,K=null){try{let m=document.location.host,_="detector",b={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:_,to:_.substring(0,_.length-2),content:{requestMethod:L,url:V,type:i,content:E}};m.includes("youtube.com")&&K&&K[0]&&K[0].length&&(b.content.encodedPostBody=K[0]),window.postMessage(b,"*")}catch(L){}}let V=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],V.apply(this,arguments)};let i=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const V=Object.assign(arguments,{});let E=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(L){const V=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!V&&V.some((V=>L.includes(V)))}(this.responseURL)||L(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,V),E)return E.apply(this,arguments)},i.apply(this,arguments)};let E=fetch;fetch=function(){const V=arguments;let i=arguments[0]instanceof Request?arguments[0].url:arguments[0];const K=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof i&&i.href&&(i=i.href),new Promise(((m,_)=>{E.apply(this,V).then((function(V){if(V.body instanceof ReadableStream){const E=V.json;V.json=function(){return new Promise(((m,_)=>{E.apply(this,arguments).then((function(E){0!==V.url.search(/data:application\/json;base64/)&&L(K,i,V.headers.get("content-type"),JSON.stringify(E)),m(E)})).catch((function(L){_(L)}))}))};const m=V.text;V.text=function(){return new Promise(((E,_)=>{m.apply(this,arguments).then((function(m){0!==V.url.search(/data:application\/json;base64/)&&L(K,i,V.headers.get("content-type"),m),E(m)})).catch((function(L){_(L)}))}))}}m.apply(this,arguments)})).catch((function(L){_.apply(this,arguments)}))}))}})();